<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§¤ì¼ ì¹¸ì§€ ì†Œê°œ | 3ë¶„ ì¼ë³¸ì–´ í•™ìŠµ ë£¨í‹´</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
          integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <style>
        /* (ìŠ¤íƒ€ì¼ ì‹œíŠ¸ ë‚´ìš©ì€ ì´ì „ê³¼ ë™ì¼í•©ë‹ˆë‹¤. ìƒëµ) */
        :root {
            --maeil-blue: #2563EB;
            --maeil-light-blue: #F0F5FF;
            --maeil-success: #198754;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif !important;
        }

        .text-maeil {
            color: var(--maeil-blue) !important;
        }

        .bg-maeil {
            background-color: var(--maeil-blue) !important;
        }

        .btn-maeil {
            background-color: var(--maeil-blue);
            border-color: var(--maeil-blue);
            color: white;
            transition: all 0.3s;
        }

        .btn-maeil:hover {
            background-color: #1E4DBC;
            border-color: #1E4DBC;
            color: white;
        }

        .section-divider {
            height: 3px;
            width: 60px;
            background-color: var(--maeil-blue);
            margin: 20px auto 30px auto;
            border-radius: 2px;
        }

        .feature-icon {
            font-size: 2.5rem;
            color: var(--maeil-blue);
        }

        .content-card-preview {
            border: 1px solid #dee2e6;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            background-color: white;
        }

        .quiz-section {
            background-color: #fafafa;
            border-top: 1px solid #eee;
        }

        .answer-reveal {
            background-color: var(--maeil-light-blue);
            color: var(--maeil-blue);
            font-weight: bold;
            border-radius: 6px;
        }

        /* --------------------- ëª¨ë‹¬ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì¶”ê°€ --------------------- */
        .btn-modal-action {
            background-color: var(--maeil-blue);
            color: white;
            border: none;
            border-radius: 0.375rem; /* Bootstrap ê¸°ë³¸ border-radius */
            padding: 0.375rem 0.75rem; /* Bootstrap ê¸°ë³¸ padding */
            font-size: 0.875rem; /* Bootstrap ê¸°ë³¸ font-size */
            transition: background-color 0.15s ease-in-out;
        }

        .btn-modal-action:hover {
            background-color: #1E4DBC; /* ë” ì§„í•œ íŒŒë‘ */
            color: white;
        }

        .btn-modal-action:disabled {
            background-color: #adb5bd; /* ë¹„í™œì„±í™” ìƒ‰ìƒ */
            border-color: #adb5bd;
        }

        /* ë ˆë²¨ ì„ íƒ ë¼ë””ì˜¤ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .level-option {
            display: inline-block;
            margin-right: 15px;
            margin-bottom: 10px;
        }

        .level-option input[type="radio"] {
            display: none; /* ê¸°ë³¸ ë¼ë””ì˜¤ ë²„íŠ¼ ìˆ¨ê¸°ê¸° */
        }

        .level-option label {
            display: flex;
            align-items: center;
            padding: 8px 15px;
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            background-color: #fff;
            color: #495057;
        }

        .level-option label:hover {
            border-color: var(--maeil-blue);
            color: var(--maeil-blue);
        }

        .level-option input[type="radio"]:checked + label {
            background-color: var(--maeil-blue);
            color: white;
            border-color: var(--maeil-blue);
            box-shadow: 0 0 0 0.25rem rgba(37, 99, 235, 0.25); /* Bootstrap focus-ring ëŠë‚Œ */
        }

        .level-option label .check-icon {
            margin-right: 8px;
            font-size: 1.1rem;
            color: #ccc; /* ì²´í¬ ì•ˆ ëì„ ë•Œ ì•„ì´ì½˜ ìƒ‰ìƒ */
        }

        .level-option input[type="radio"]:checked + label .check-icon {
            color: white; /* ì²´í¬ ëì„ ë•Œ ì•„ì´ì½˜ ìƒ‰ìƒ */
        }

        #levelOptions {
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body>

<nav class="navbar navbar-light bg-white border-bottom">
    <div class="container px-4">
        <a class="navbar-brand fw-bold fs-4 text-maeil" href="#">ë§¤ì¼ ì¹¸ì§€ ğŸ‡¯ğŸ‡µ</a>
        <button type="button" class="btn btn-sm btn-outline-primary fw-semibold" data-bs-toggle="modal"
                data-bs-target="#subscribeModal">ë¬´ë£Œ êµ¬ë…
        </button>
    </div>
</nav>

<header id="hero" class="text-center py-5" style="background-color: var(--maeil-light-blue);">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <h1 class="display-5 fw-bold text-dark mb-3">
                    ì‘ì‹¬ì‚¼ì¼ ì—†ì´, <span class="text-maeil">ë§¤ì¼ 3ë¶„</span>ìœ¼ë¡œ ëë‚´ëŠ” ì¼ë³¸ì–´ í•œì ë£¨í‹´
                </h1>
                <p class="lead text-muted mb-4">
                    ë§¤ì¼ ì¹¸ì§€ëŠ” <strong>ë ˆë²¨ë³„ 2ê°œì˜ í•µì‹¬ í•œì</strong>ì™€ ì‹¤ìš© ì˜ˆë¬¸ì„ ì´ë©”ì¼ë¡œ ë³´ë‚´ë“œë ¤, ë¶€ë‹´ ì—†ì´ <strong>ê¾¸ì¤€íˆ</strong> ì¼ë³¸ì–´ ì‹¤ë ¥ì„ ìŒ“ê²Œ ë•ëŠ”
                    ë°ì¼ë¦¬ í•™ìŠµ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
                </p>
                <button type="button" class="btn btn-maeil btn-lg fw-semibold" data-bs-toggle="modal"
                        data-bs-target="#subscribeModal">
                    ğŸš€ ì§€ê¸ˆ ë°”ë¡œ ë¬´ë£Œ êµ¬ë… ì‹œì‘í•˜ê¸°
                </button>
            </div>
        </div>
    </div>
</header>

<section id="concept" class="py-5">
    <div class="container text-center">
        <h2 class="fw-bold mb-2">ë§¤ì¼ ì¹¸ì§€ê°€ ì œê³µí•˜ëŠ” 3ê°€ì§€ í•µì‹¬ ê°€ì¹˜</h2>
        <div class="section-divider"></div>
        <div class="row mt-5">
            <div class="col-md-4 mb-4">
                <div class="feature-icon mb-3">ğŸ¯</div>
                <h5 class="fw-bold">ê°œì¸ ë§ì¶¤í˜• ë‚œì´ë„</h5>
                <p class="text-muted">ê°€ì… ì‹œ <strong>ì´ˆê¸‰, ì¤‘ê¸‰, ê³ ê¸‰</strong> ì¤‘ ì„ íƒ! ë§¤ì¼ ìì‹ ì˜ ë ˆë²¨ì— ë§ëŠ” 2ê°œì˜ í•œìë§Œ ë°›ìŠµë‹ˆë‹¤.</p>
            </div>

            <div class="col-md-4 mb-4">
                <div class="feature-icon mb-3">ğŸ”—</div>
                <h5 class="fw-bold">ì´í•´ê°€ ì‰¬ìš´ ì—°ê´€ í•™ìŠµ</h5>
                <p class="text-muted">ì„œë¡œ ì—°ê´€ë˜ê±°ë‚˜ ë°˜ì˜ì–´ì¸ í•œìë¥¼ ë¬¶ì–´ ë³´ë‚´ <strong>ì—°ìƒ ì•”ê¸° íš¨ê³¼</strong>ë¥¼ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤.</p>
            </div>

            <div class="col-md-4 mb-4">
                <div class="feature-icon mb-3">âœ…</div>
                <h5 class="fw-bold">ìµœì í™”ëœ ì½˜í…ì¸  ë°€ë„</h5>
                <p class="text-muted">í•µì‹¬ 2í•œì, ë‹¨ì–´ 4ê°œ, ì˜ˆë¬¸ 1ê°œë§Œìœ¼ë¡œ <strong>3ë¶„ ì•ˆì—</strong> ì˜¤ëŠ˜ í•™ìŠµì„ ì™„ë£Œí•©ë‹ˆë‹¤.</p>
            </div>
        </div>
    </div>
</section>

<section id="how-it-works" class="py-5 bg-light">
    <div class="container text-center">
        <h2 class="fw-bold mb-2">ë©”ì¼ê³¼ ì‚¬ì´íŠ¸, ì´ë ‡ê²Œ ì‘ë™í•©ë‹ˆë‹¤</h2>
        <div class="section-divider"></div>

        <div class="row mt-5">
            <div class="col-lg-10 mx-auto">
                <div class="row align-items-center">
                    <div class="col-md-5 text-start mb-4 mb-md-0">
                        <h4 class="fw-bold text-maeil">STEP 1. ì´ë©”ì¼ (í€´ì¦ˆ & ìœ ë„)</h4>
                        <p class="lead">ë©”ì¼ì—ëŠ” <strong>í•µì‹¬ í€´ì¦ˆ</strong>ë§Œ ë…¸ì¶œí•˜ì—¬ ê¶ê¸ˆì¦ì„ ìœ ë°œí•©ë‹ˆë‹¤.</p>
                        <div class="p-3 bg-white border rounded shadow-sm">
                            <p class="fw-bold text-center mb-0"><strong>[í€´ì¦ˆ]</strong> 'ê²‰ì˜·'ì˜ ì¼ë³¸ì–´ ì½ëŠ” ë°©ë²•ì€ ë¬´ì—‡ì¼ê¹Œìš”?</p>
                            <button class="btn btn-maeil btn-sm w-100 mt-3">ì •ë‹µ ë° í•™ìŠµ ì™„ì„±í•˜ëŸ¬ ê°€ê¸°</button>
                        </div>
                    </div>

                    <div class="col-md-2 text-center d-none d-md-block">
                        <span class="feature-icon">â¡ï¸</span>
                    </div>

                    <div class="col-md-5 text-start">
                        <h4 class="fw-bold text-maeil">STEP 2. ì›¹ì‚¬ì´íŠ¸ (ë‹µë³€ & ì™„ì„±)</h4>
                        <p class="lead">ì‚¬ì´íŠ¸ ì ‘ì† í›„ <strong>ì •ë‹µì„ í™•ì¸í•˜ê³ </strong> ì˜¤ëŠ˜ í•™ìŠµì„ ìµœì¢… ì™„ë£Œí•©ë‹ˆë‹¤.</p>
                        <div class="p-3 bg-white border rounded shadow-sm">
                            <h5 class="fw-bold text-maeil">âœ… í€´ì¦ˆ ì •ë‹µ ê³µê°œ!</h5>
                            <p class="mb-1 small fw-bold">ì •ë‹µ: ã†ã‚ã (ä¸Šç€)</p>
                            <hr class="my-2">
                            <h6 class="fw-bold">â­ í•™ìŠµ ë‚´ìš©</h6>
                            <p class="small text-muted mb-0">í•µì‹¬ ë‹¨ì–´ 4ê°œì™€ ì‹¤ìš© ì˜ˆë¬¸ê¹Œì§€ ëª¨ë‘ í™•ì¸í•˜ì—¬ í•™ìŠµì„ ì™„ì„±í•˜ì„¸ìš”.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="content-preview" class="py-5">
    <div class="container text-center">
        <h2 class="fw-bold mb-2">ì‚¬ì´íŠ¸ì—ì„œ ì œê³µë˜ëŠ” ìµœì¢… ì½˜í…ì¸  ë¯¸ë¦¬ë³´ê¸°</h2>
        <p class="lead text-muted">ë©”ì¼ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì´ì²˜ëŸ¼ ê¹”ë”í•˜ê²Œ ì •ë¦¬ëœ ì˜¤ëŠ˜ì˜ í•™ìŠµ ë‚´ìš©ì„ ë³´ê²Œ ë©ë‹ˆë‹¤.</p>
        <div class="section-divider"></div>

        <div class="row justify-content-center mt-5">
            <div class="col-lg-10">
                <div class="content-card-preview p-4">

                    <p class="fw-bold text-maeil mb-1">
                        [ë§¤ì¼ ì¹¸ì§€] ğŸ‡¯ğŸ‡µ ì´ˆê¸‰ìë¥¼ ìœ„í•œ ì˜¤ëŠ˜ì˜ í•œì (ä¸Š vs ä¸‹)
                    </p>
                    <hr class="my-3">

                    <div class="row mb-4">
                        <div class="col-md-6 text-start">
                            <h6 class="fw-bold text-maeil mb-3">ì˜¤ëŠ˜ì˜ í•œì 2ê°œ!</h6>
                            <p class="mb-1">
                                <span class="fs-5 fw-bold me-2">ä¸Š (ã†ãˆ, ã†ã‚)</span> : ìœ„, ì˜¤ë¥´ë‹¤
                            </p>
                            <p class="mb-3">
                                <span class="fs-5 fw-bold me-2">ä¸‹ (ã—ãŸ, ã—ã‚‚)</span> : ì•„ë˜, ë‚´ë¦¬ë‹¤
                            </p>
                        </div>
                        <div class="col-md-6 text-start">
                            <h6 class="fw-bold text-maeil mb-3">í•µì‹¬ ë‹¨ì–´ 4ê°œ!</h6>
                            <ul class="list-unstyled small">
                                <li><strong>ä¸Šç€(ã†ã‚ã)</strong>: ê²‰ì˜·</li>
                                <li><strong>ä¸Šæ‰‹(ã˜ã‚‡ã†ãš)</strong>: ëŠ¥ìˆ™í•¨</li>
                                <li><strong>ä¸‹ç€(ã—ãŸã)</strong>: ì†ì˜·</li>
                                <li><strong>ä¸‹æ‰‹(ã¸ãŸ)</strong>: ì„œíˆ¬ë¦„</li>
                            </ul>
                        </div>
                    </div>

                    <h6 class="fw-bold text-maeil mt-3 text-start">ì‹¤ìš© ì˜ˆë¬¸ 1ê°œ!</h6>
                    <p class="alert alert-secondary p-2 small text-start">
                        ãã®
                        <ruby>æœ
                            <rt>ãµã</rt>
                        </ruby>
                        ã¯<strong>
                        <ruby>ä¸Šç€
                            <rt>ã†ã‚ã</rt>
                        </ruby>
                    </strong>ã‚‚<strong>
                        <ruby>ä¸‹ç€
                            <rt>ã—ãŸã</rt>
                        </ruby>
                    </strong>ã‚‚<strong>
                        <ruby>ä¸‹æ‰‹
                            <rt>ã¸ãŸ</rt>
                        </ruby>
                    </strong>ãª
                        <ruby>ç§
                            <rt>ã‚ãŸã—</rt>
                        </ruby>
                        ã«ãƒ”ãƒƒã‚¿ãƒªã§ã—ãŸã€‚
                        <span class="d-block mt-1 text-muted">(ê·¸ ì˜·ì€ ê²‰ì˜·ë„ ì†ì˜·ë„ ì„œíˆ¬ë¥¸ ë‚˜ì—ê²Œ ë”± ë§ì•˜ìŠµë‹ˆë‹¤.)</span>
                    </p>

                    <div class="quiz-section p-3 mt-3">
                        <h6 class="fw-bold text-maeil mt-1 text-start">âœ… ë¯¸ë‹ˆ í€´ì¦ˆ ì •ë‹µ í™•ì¸!</h6>
                        <p class="small text-start">Q. ìœ„ì˜ ì˜ˆë¬¸ì—ì„œ <strong>'ê²‰ì˜·'</strong>ì˜ ì¼ë³¸ì–´ ì½ëŠ” ë°©ë²•ì€ ë¬´ì—‡ì¼ê¹Œìš”?</p>

                        <div class="answer-reveal p-2 small text-start">
                            ì •ë‹µ: <span class="fw-bold text-dark">ã†ã‚ã (ä¸Šç€)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="cta" class="py-5 bg-maeil text-white text-center">
    <div class="container">
        <h2 class="fw-bold mb-3">ë‹¹ì‹ ì˜ ì¼ë³¸ì–´ ì‹¤ë ¥, ì˜¤ëŠ˜ë¶€í„° ë‹¬ë¼ì§‘ë‹ˆë‹¤.</h2>
        <p class="lead mb-4">ì§€ê¸ˆ ë°”ë¡œ ë¬´ë£Œë¡œ ì‹œì‘í•˜ê³  ë§¤ì¼ ê¾¸ì¤€í•¨ì˜ í˜ì„ ê²½í—˜í•˜ì„¸ìš”.</p>
        <button type="button" class="btn btn-light btn-lg fw-semibold text-maeil" data-bs-toggle="modal"
                data-bs-target="#subscribeModal">
            ğŸš€ ë§¤ì¼ ì¹¸ì§€ ë¬´ë£Œ êµ¬ë… ì‹œì‘í•˜ê¸°
        </button>
    </div>
</section>

<footer class="bg-dark py-4">
    <div class="container text-center">
        <p class="text-white-50 small mb-0">Â© 2025 ë§¤ì¼ ì¹¸ì§€. All rights reserved.</p>
    </div>
</footer>

<div class="modal fade" id="subscribeModal" tabindex="-1" aria-labelledby="subscribeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header border-0 pb-0"><h5 class="modal-title fw-bold text-dark" id="subscribeModalLabel">
                ë§¤ì¼ ì¹¸ì§€ êµ¬ë…</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body pt-0">
                <div id="signupFormContent">
                    <form id="subscribeForm" th:action="@{/api/v1/members/signup}" method="post">

                        <!--                        <p class="text-center text-muted small mb-3">ê°„í¸ ì¸ì¦ í›„, ë ˆë²¨ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.</p>-->
                        <br>
                        <div class="mb-3">
                            <label for="email" class="form-label small fw-bold">ì´ë©”ì¼ ì£¼ì†Œ</label>
                            <div class="input-group">
                                <input type="email" class="form-control" id="email" name="email"
                                       placeholder="example@email.com" required>
                                <button class="btn btn-modal-action btn-sm" type="button" id="sendCodeBtn"
                                        onclick="sendVerificationCode()">ì¸ì¦ ì½”ë“œ ë°œì†¡
                                </button>
                            </div>
                            <div id="emailHelp" class="form-text text-danger" style="display: none;"></div>
                        </div>

                        <div id="verificationSection" style="display: none;">
                            <div class="mb-3">
                                <label for="code" class="form-label small fw-bold">ì¸ì¦ ì½”ë“œ (4ìë¦¬ ìˆ«ì)</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="code" name="code"
                                           placeholder="ë©”ì¼ë¡œ ë°›ì€ 4ìë¦¬ ìˆ«ì ì…ë ¥" maxlength="4">
                                    <button class="btn btn-modal-action btn-sm" type="button" id="verifyCodeBtn"
                                            onclick="verifyCode()">ì½”ë“œ í™•ì¸
                                    </button>
                                </div>
                                <div id="codeHelp" class="form-text text-danger" style="display: none;"></div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label small fw-bold d-block">í•™ìŠµ ë ˆë²¨ ì„ íƒ</label>
                            <div id="levelOptions">
                                <div class="level-option">
                                    <input type="radio" id="levelBeginner" name="level" value="BEGINNER" required
                                           disabled>
                                    <label for="levelBeginner">
                                        <i class="fa-solid fa-circle check-icon"></i> ì´ˆê¸‰ â¡ï¸ ì—¬í–‰ì§€ ê°„íŒ ì½ê¸°ì— ë„ì „í•©ë‹ˆë‹¤!
                                    </label>
                                </div>
                                <div class="level-option">
                                    <input type="radio" id="levelIntermediate" name="level" value="INTERMEDIATE"
                                           disabled>
                                    <label for="levelIntermediate">
                                        <i class="fa-solid fa-circle check-icon"></i> ì¤‘ê¸‰ â¡ï¸ ì¼ë³¸ ë‰´ìŠ¤ ê¸°ì‚¬ ì œëª©ì„ í•´ì„í•©ë‹ˆë‹¤!
                                    </label>
                                </div>
                                <div class="level-option">
                                    <input type="radio" id="levelAdvanced" name="level" value="ADVANCED" disabled>
                                    <label for="levelAdvanced">
                                        <i class="fa-solid fa-circle check-icon"></i> ê³ ê¸‰ â¡ï¸ ì „ë¬¸ê°€ ë¦¬í¬íŠ¸ì˜ í•µì‹¬ ê°œë…ì„ íŒŒì•…í•©ë‹ˆë‹¤!
                                    </label>
                                </div>
                            </div>

                            <div class="d-grid mt-4">
                                <button type="submit" class="btn btn-maeil btn-lg fw-bold" id="finalSignupBtn" disabled>
                                    êµ¬ë… ì™„ë£Œ ë° ì‹œì‘í•˜ê¸°
                                </button>
                            </div>
                        </div>
                    </form>
                </div>

                <div id="successMessageContent" class="text-center py-4" style="display: none;">
                    <h4 class="text-maeil fw-bold mb-3">ğŸ‰ êµ¬ë…ì„ í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‰</h4>
                    <p class="lead"><strong>ë§¤ì¼ ì¹¸ì§€</strong> êµ¬ë…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                    <p class="text-muted small">ì²« ë²ˆì§¸ í•™ìŠµ ë©”ì¼ì€ ë‚´ì¼ ì•„ì¹¨ ì„ íƒí•˜ì‹  ë ˆë²¨ë¡œ ë°œì†¡ë©ë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!</p>
                    <button type="button" class="btn btn-outline-secondary mt-3" data-bs-dismiss="modal">ì°½ ë‹«ê¸°</button>
                </div>

            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // --------------------------------------------------------
    // API ì—”ë“œí¬ì¸íŠ¸ ê²½ë¡œ ì •ì˜
    const BASE_API_URL = '/api/v1/members';

    // ì´ë©”ì¼ ì…ë ¥ ì‹œ ìœ íš¨ì„± ê²€ì‚¬ í—¬í¼
    function validateEmail(email) {
        if (!email || !email.includes('@') || !email.includes('.')) {
            return "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.";
        }
        return null;
    }

    // Helper: ì„±ê³µ/ì‹¤íŒ¨ ë©”ì‹œì§€ UI ì—…ë°ì´íŠ¸
    function updateHelpText(elementId, message, isSuccess) {
        const helpText = document.getElementById(elementId);
        helpText.textContent = message;
        helpText.classList.remove('text-danger', 'text-success');
        helpText.classList.add(isSuccess ? 'text-success' : 'text-danger');
        helpText.style.display = 'block';
    }

    // 1. ì¸ì¦ ì½”ë“œ ë°œì†¡ ìš”ì²­ (Controllerì˜ /api/v1/members/send-verification-code í˜¸ì¶œ)
    async function sendVerificationCode() {
        const emailInput = document.getElementById('email');
        const email = emailInput.value;
        const btn = document.getElementById('sendCodeBtn');
        const helpTextId = 'emailHelp';

        const validationError = validateEmail(email);
        if (validationError) {
            updateHelpText(helpTextId, validationError, false);
            return;
        }

        btn.textContent = 'ë°œì†¡ ì¤‘...';
        btn.disabled = true;

        try {
            const response = await fetch(`${BASE_API_URL}/send-verification-code`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({email: email})
            });

            const data = await response.json();

            if (response.ok) {
                updateHelpText(helpTextId, `âœ… ${data.message} (ìœ íš¨ì‹œê°„ 3ë¶„)`, true);
                document.getElementById('verificationSection').style.display = 'block';
                btn.textContent = 'ì½”ë“œ ì¬ë°œì†¡';
                btn.disabled = false;

            } else {
                const errorMessage = data.message || "ë©”ì¼ ë°œì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.";
                updateHelpText(helpTextId, `âŒ ${errorMessage}`, false);
                btn.textContent = 'ì¸ì¦ ì½”ë“œ ë°œì†¡';
                btn.disabled = false;
            }

        } catch (error) {
            updateHelpText(helpTextId, 'âŒ ì„œë²„ í†µì‹  ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', false);
            btn.textContent = 'ì¸ì¦ ì½”ë“œ ë°œì†¡';
            btn.disabled = false;
        }
    }

    // 2. ì¸ì¦ ì½”ë“œ í™•ì¸ ìš”ì²­ (Controllerì˜ /api/v1/members/verify-verification-code í˜¸ì¶œ)
    async function verifyCode() {
        const email = document.getElementById('email').value;
        const code = document.getElementById('code').value;
        const btn = document.getElementById('verifyCodeBtn');
        const helpTextId = 'codeHelp';

        if (code.length !== 4) {
            updateHelpText(helpTextId, '4ìë¦¬ ìˆ«ìë¥¼ ì •í™•íˆ ì…ë ¥í•´ ì£¼ì„¸ìš”.', false);
            return;
        }

        btn.textContent = 'í™•ì¸ ì¤‘...';
        btn.disabled = true;

        try {
            const response = await fetch(`${BASE_API_URL}/verify-verification-code`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({email: email, code: code})
            });

            const data = await response.json();

            if (response.ok && data.verified === true) {
                // ì„±ê³µ: ì¸ì¦ í”Œë˜ê·¸ê°€ Redisì— ì €ì¥ë¨

                document.getElementById('finalSignupBtn').disabled = false;

                // ë ˆë²¨ ì„ íƒ ë¼ë””ì˜¤ ë²„íŠ¼ í™œì„±í™”
                document.querySelectorAll('#levelOptions input[type="radio"]').forEach(radio => {
                    radio.disabled = false;
                });

                document.getElementById('email').disabled = true;
                btn.textContent = 'âœ… í™•ì¸ ì™„ë£Œ';
                btn.disabled = true;
                document.getElementById('sendCodeBtn').disabled = true;

                updateHelpText(helpTextId, 'âœ… ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë ˆë²¨ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.', true);

            } else {
                const errorMessage = "ì¸ì¦ ì½”ë“œê°€ ì¼ì¹˜í•˜ì§€ ì•Šê±°ë‚˜ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.";
                updateHelpText(helpTextId, `âŒ ${errorMessage}`, false);
                btn.textContent = 'ì½”ë“œ í™•ì¸';
                btn.disabled = false;
            }
        } catch (error) {
            updateHelpText(helpTextId, 'âŒ ì„œë²„ í†µì‹  ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', false);
            btn.textContent = 'ì½”ë“œ í™•ì¸';
            btn.disabled = false;
        }
    }

    // 3. ìµœì¢… ê°€ì… í¼ ì œì¶œ ë¡œì§ (Controllerì˜ /api/v1/members/signup í˜¸ì¶œ)
    document.getElementById('subscribeForm').addEventListener('submit', async function (event) {
        event.preventDefault();

        const finalSignupBtn = document.getElementById('finalSignupBtn');
        const selectedLevel = document.querySelector('#levelOptions input[name="level"]:checked');
        const email = document.getElementById('email').value;

        // ìµœì¢… í”„ë¡ íŠ¸ì—”ë“œ ê²€ì¦ (ë ˆë²¨ ì„ íƒ ì—¬ë¶€ í¬í•¨)
        if (finalSignupBtn.disabled || !selectedLevel) {
            alert('âŒ ì¸ì¦ì„ ì™„ë£Œí•˜ê³  ë ˆë²¨ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.');
            return;
        }

        finalSignupBtn.textContent = 'ê°€ì… ì§„í–‰ ì¤‘...';
        finalSignupBtn.disabled = true;

        try {
            const response = await fetch(`${BASE_API_URL}/signup`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({email: email, level: selectedLevel.value}) // ì„ íƒëœ ë ˆë²¨ ê°’ ì „ì†¡
            });

            const data = await response.json();

            if (response.ok) {
                document.getElementById('signupFormContent').style.display = 'none';
                document.getElementById('successMessageContent').style.display = 'block';
                document.getElementById('subscribeModalLabel').textContent = 'êµ¬ë… ì™„ë£Œ!';

            } else {
                const errorMessage = data.message || "ê°€ì… ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.";
                alert(`âŒ ê°€ì… ì‹¤íŒ¨: ${errorMessage}`);
                finalSignupBtn.textContent = 'êµ¬ë… ì™„ë£Œ ë° ì‹œì‘í•˜ê¸°';
                finalSignupBtn.disabled = false;
            }
        } catch (error) {
            alert('âŒ ì„œë²„ í†µì‹  ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            finalSignupBtn.textContent = 'êµ¬ë… ì™„ë£Œ ë° ì‹œì‘í•˜ê¸°';
            finalSignupBtn.disabled = false;
        }
    });

</script>
</body>
</html>